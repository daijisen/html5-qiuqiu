<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="//g.alicdn.com/msui/sm/0.6.2/css/sm.min.css">
    <script type='text/javascript' src='//g.alicdn.com/sj/lib/zepto/zepto.min.js' charset='utf-8'></script>
    <script type='text/javascript' src='//g.alicdn.com/msui/sm/0.6.2/js/sm.min.js' charset='utf-8'></script>
    <link rel="stylesheet" href="//g.alicdn.com/msui/sm/0.6.2/css/??sm.min.css,sm-extend.min.css">
    <script type='text/javascript' src='//g.alicdn.com/msui/sm/0.6.2/js/??sm.min.js,sm-extend.min.js' charset='utf-8'></script>

    <title>contenteditable</title>
    <style>
        *{
            margin:0;padding:0;
        }
        .im-message-area{
            width:98%;
            padding:2px;
            height:75px;
            border:#000 solid 1px;
            background:#fff;
            font:12px/20px arial,"5b8b4f53";
            word-wrap:break-word;
            overflow-y:auto;
            line-height:1;
        }
        .ul{display:none;}
        .ul li{
            background-color:#CCC;
            width:50px;
        }
    </style>
    <script language="javascript" type="text/javascript">
        function inimage(text){
            var obj= $(".im-message-area")[0];
            var range, node;
            if(!obj.hasfocus) {
                obj.focus();
            }
            if (window.getSelection && window.getSelection().getRangeAt) {
                range = window.getSelection().getRangeAt(0);
                range.collapse(false);
                node = range.createContextualFragment(text);
                var c = node.lastChild;
                range.insertNode(node);
                if(c){
                    range.setEndAfter(c);
                    range.setStartAfter(c)
                }
                var j = window.getSelection();
                j.removeAllRanges();
                j.addRange(range);

            } else if (document.selection && document.selection.createRange) {
                document.selection.createRange().pasteHTML(text);
            }
        }
    </script>
</head>
<body>

<div contenteditable="true" id="im_message_area" class="im-message-area"><br></div>
</body>
</html>